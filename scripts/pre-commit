#!/bin/sh
# Pre-commit hook: Check biome, TypeScript, and cargo before commit
# Install: cp scripts/pre-commit .git/hooks/ && chmod +x .git/hooks/pre-commit

echo "ğŸ” Running pre-commit checks..."

# Check biome (frontend)
echo "â†’ Checking Biome..."
bun run biome check . --colors=force || {
  echo ""
  echo "âŒ Biome check failed. Run 'bun run biome check --write .' to fix."
  exit 1
}

# Check TypeScript types (project references)
echo ""
echo "â†’ Checking TypeScript..."
bun run tsc -b || {
  echo ""
  echo "âŒ TypeScript check failed."
  exit 1
}

# Check cargo (Rust backend)
echo ""
echo "â†’ Checking Cargo..."
cd src-tauri && cargo check --quiet 2>&1 || {
  echo ""
  echo "âŒ Cargo check failed."
  exit 1
}

echo ""
echo "âœ… All checks passed!"
